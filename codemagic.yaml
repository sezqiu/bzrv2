workflows:
  release:
    name: Publish app to playstore and apple store
    max_build_duration: 60
    environment:
      vars:
        API_URL: https://api.bazzarapi.com
        BASE_URL: https://bazzarapi.com
        IMAGE_URL_PATH: https://ik.imagekit.io/ytqeidewn
        ONE_SIGNAL_KEY: Encrypted(Z0FBQUFBQmdyZWhVZ1hweTdjbDlvT0Jid1AxcTdFTkZETks5Y0dYdkpfamNyaExaR2hET3lJOHFyYmw1c2xDeEYxbVlkeHNUdE9IaHlabjdwbC0ycG5fVHktUzZ4X05pSEFGZ1c1aUdxQll2VWdqZHgyRHp1NXY0Z3U5RGFsT1l4em9JRkpWSjUtLXc=)
        #STRIPE_KEY: 
        ANDROID_GOOGLE_MAP_API_KEY: Encrypted(Z0FBQUFBQmdyZVk3V2VjMU9LY3BleDRnTlRXMXkzVVBPdXdzdHF1N1RTNENZNTlXS3RhT3c5NnVfQXRjQmNfVk8yUkFmRFBiVHctb09ic0ttYkRXQjl0enBQVnpyX1VkaFRCM3BWY0p6azYzNVZEMzRfVFAxdEtmY09ETldxSU04N0dPcmtOcFE3SnQ=)
        IOS_GOOGLE_MAP_API_KEY: Encrypted(Z0FBQUFBQmdyZVk3V2VjMU9LY3BleDRnTlRXMXkzVVBPdXdzdHF1N1RTNENZNTlXS3RhT3c5NnVfQXRjQmNfVk8yUkFmRFBiVHctb09ic0ttYkRXQjl0enBQVnpyX1VkaFRCM3BWY0p6azYzNVZEMzRfVFAxdEtmY09ETldxSU04N0dPcmtOcFE3SnQ=)
        STORE_PASSWORD: Encrypted(Z0FBQUFBQmdyZVpVX0hUUi1GOGx4Zy1zY1llZkxVRFY5c0R6cDRaYXVtRmxUWFRObHVsMjVDa1RfXzlfcE0wV1ZYZXJ0TGtkTTV5S29PT2MyLUZOTTcxd0xJazdfd0ZnN2c9PQ==)
        KEY_PASSWORD: Encrypted(Z0FBQUFBQmdyZVpVX0hUUi1GOGx4Zy1zY1llZkxVRFY5c0R6cDRaYXVtRmxUWFRObHVsMjVDa1RfXzlfcE0wV1ZYZXJ0TGtkTTV5S29PT2MyLUZOTTcxd0xJazdfd0ZnN2c9PQ==)
        APP_STORE_CONNECT_ISSUER_ID: da437130-7152-49a8-9f6e-07e6992d6fce
        APP_STORE_CONNECT_KEY_IDENTIFIER: 5L5TDT9VZB
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmd0Yi1NamxHcW9RX1ZwalpjWXB6UUZVRXh2TmswMHlGOGRtLVg3d2NFeUItbWZKYnctdjVPeXhMUVlONU5SX2lOM1k2bFBCUG54SWp5bDlNRE1lVGRTMkVOY0tRVGU5Q1FSRG1GQk55elAwcHRTZGgxbGJSYUNnNFl4blp3VGc5dFJWMjkyV014ZVBra0FySEJONkU0dUhtb3lsOGlVY1BHakh3OHB0aEU3dlp2T1Y2bklyY0F0Z0NvWkNuZjhnbDhtLTJZRF9EZ1o5aWlyOVRyenM5Umc1d0FfNXVfSUllZHBqaFIycDRtTlhINVBoNFE4VTdkZ3hkemRfWG40S2NIM2hreGh0ZUtqOFRCa3hZbzNnM3Fnb0Y0RU1XbDBXU3ctMGJLMVNFTXBWRlpoQ2lZUU9aVHR5OUJ5aThqa09fd1NYV3YzY1hrZ0VDNS1vT01NRHo5YmdzcmJGNE5NNkt4XzYwd2txR1Z6WWRxMGQyT2MzUFhQYlVFX09EWThQTS1ualQ3RG01OUNJakVIbHY4YzRrb2VfT1N6R2ZXMnRoZEtRN0xkajdzdlFibzVyaz0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmd0Yi1NRGhuZHBNeWd4RFBuX2RmLTlzNmxQOTR5eDhUZVdNOTBiT3FRaFNxd0FxeFlSMmZvTjVqZ0NNdkpTcXdjY2taa0JmdnhMZl85a1lFQVR0c0xkaHk1WGZ4VHVocWEwMk1VcjZvRkROcUNGOHBNTUVxSDVUaFpoTmhLM2otcE0yRVpEV2sweTFWQlRYN2QtazBHajdTX0VDQ3hfeUxNeG9DcFM4anpTTXFiN09LN0ZFbUh2SFN0elZ6QlJpbWdpRkozQno2b3RhZFJ6a0xFLWJxWktEMjFFdFhhYWpqeEprQVZmYTZWM2JRbWNZQVVoR3Q3bldKVTBYckM3bFhzNWJ0Qnp2bXpnbnZwYnBBVS01eFE1X1ZxTTNmTG1KTGFzRmJ4R2JIc19nVFNBY3J3TnFhd05YeTd5MUtXZ1QzelhJcHFrc2l6cmgyeVhIT3pNWmJnNTFMeXJ6cGlvSFM2VTlfSzJvUG41NXVYNTBBdTc4U1BDUTBsWVpfMGtLVlhITUdjdmx0d01SS1JtNFlHS1U4MXlhMGVvdDBwSkVwY2VVdXJGQUF5bmNqVGFucERaeHZxWS1SbDFxdHBkWWNzZENVQ3ZGcEVzX29IRWxpTnJfSWhDTXF3ZVU4aDNEdldUWndSbzF6LUwtOS1IeVlUR2dVdElyWVNrZnF3cWNmNnZ1VUZtQVotNU42RkxPNVhON1BiUGpyT2tka0cxSnROVDkyR2g1NWJycENkUkpNa3RYVjRISTByV2pvVTljclZBU3FRVkFJSV94Wm1PaEJKODJUWm1MRGxQdTJfdWtEV2FKeVRxMGhQY0pSWkhzNGpnMi1KZG5rMVNOMEV5aWdnRW4taFF1YmxWclZKdEx0aTVvdUdRenpQOVNlMU0wWVQxLXd5ZV9oVllkQVVEOHlIdDZTSXlHaW1NTzc1elBOYUdGTXZnVFNlaE5HWk9nakZDejJBcGhUTkxwNUt2Njl5RmdHRXJpaEJ1aHpVU1JNblpqdDJEU2RsdzJSRHYxMmtzcmNDTXBLOWhUR0o1NG5XdDZzZnQyYXNpcDNzbnBaMXFBakU1STR3UjA2bDZaNUtYLVhJRFlVd1lLRVBOSVdLVDhZZVpkZHJmTVpsWjlPOXZYWmF4TFRJb3d5RlVqVnpHbnRUeUtoUjVpTG9MZzAtOTh1cUdkaVhEYVJXbzc3UzR3YXRkXzJHR09EMzdsWFVvUXRtdnpxcVU1czlaQ3QzanpYS3hNUkxoUHl0SXg4R3drMlRqeVkxXzRGai1oRFJPSTRWTXR6Skt6Sk82cU1CR042SnZ3NzF1ZDdTX25hZTVGRTh4d3hDUVpXc0tiSzMyRDByeWZQLTVTbU0wZi1EdlBMMHQzNTZFbE5Pd2dMSWtvMWhfTWdTQXI4NGV3NmRJV2prMi1uMFdieXN6Rlh4WV9kMVVFOGhWcEh3QkZ0ME5ZQktHWElRVm9CLUk4Z2pHTVlmWllKZERiQmI1c1hUdmUwWEZkZ3BlYlhqM21XV0dGMmtmUGw1bmF2dEhEYmlRNHAycU5la24zLXRzOTBQNDhWR195Y000ZlM5enlxaXZoLUlrNldxV0NyeEZLQlVwbHRnN2sxMEltY3U4SDlfVzlsRWkzSU1EdFRQQmlKdDVwcUota3NqRk45WjlVY21PbEpsVUpWMkdlcm5MWkxBcDY5RkZmS0VSQWtISkZUYWNCLXRaMTI4WTRsWG1ncGlod2lsbmx5dWNIR1NoUHZ5NGtvbmRaOE9ZN0JSazlwZlBBeDAxUEFSZzJIcHRqbS1yTEgzbmZyU0toVHJQazdNZFlRY2V3VDBQaE15bUFLWTlwY1hLeGdCTDViS0hiWHcwNVFabVNJdmhfdlA1aHYwdlBpdkFWUkxfMzJVNXJSZHNUVzlCdndMOTh3cTNJT0h1MTBYaGdlOVlPN05Bb0tpaXNxVGJyOVhQZDVMX1h5aXpZMkM0c0hsZjRjLXNfVUl4ZlRIN0RuaWZBRDYzOHRibE5pcUcxMkZJQm1wajB4bWdDVHRNZl9NU1RYRWZ1Tm90OXF4d0xpSVI1bHQyQW1fTVBCXy1FVTNEeDZLZmZZN2V3alBGU194VnhYWlBxTHhJNE52WjNKQ3lwOGtDcWtuM3MyRGNPVW5wT2V3ZXhlNHJuSThWUDYwYkNRZUgzSHRfY2NDQklIcF9Lb3pLMzBxYTlvQkk1SkZtWHJzdl9KWng4OGtINFBjQ2NobXdtbXRUVFlsbGdITDBXbWFHdmVTaEN0dWM3d0Fnb0dCbUUzVEJGa0lEYXZRYlpTc1hVWjdmWWFGSkVoUEhTdVFtTFR6LW4wYzVuVXBXRXZtalhsT3NoQ2JfclM2dnROVGJPMXktRFBGUi1DazRjX2hHa2VjcTZhMTdrX3lKOEJ0VGJ1Zk9CNVI2Sl9CMmpCMTVpLXY1NE1QcFZpRHZXMkZxQzRnMHNUR3NRZVZWRDg0cmJ6SHh0SmZxTkM2WkpUM1lLdGpHeTJrMDdLVFotYkRSVGlvMnYtXzlQSU05c0NrZjFBSEU1V3hZSjZxeVc3TGhxRjdPX1RyaUdqV1dWeWJYOUU1SmlvUVpPYTZCX3JKb3RmTHViX0VGdjBrNEtRYnJxUmFrWjVoUXR3dUJoQUZRVWZ1b1lhR2FIZ2RJQTZfMGhwS2E4enFMM3h0Y3Q5Q2FVRXpyOFp5RUNSa2ZqWVROU0ZQTllyR3RmcS05d0tELUZacUtMbUo2dEsxMlVObUZTU0Q0YklBdUlSeWZ4SGxOTWkxY29lOHhwQXJ5VXlDQ2tRUWpLSlhvdXZzaVlnZnptNlpUOWlQSzc0eTB6NWZ2anNPMDRHbFVXR1lTYlZ4RHNuZENfaHdXN09HOE1kcGFNbDFUQTluLTN4Y1dNMV9xdTFDODV4T2w4LVYyS1JIQ29rRnRwcEtNUUdna1gzaF9KV1F6X0Z6X1hEN2ktbl9WSkJtVHVXdVFxa0ltNmNWUXYxSFZWYzc3cllUTHRzMVg3X3RtU1NmS0FZRjV0M2NMMVRTMnhqZXhXZzNqcDM2eVlRbkJIXy1KNjc2TTMtVURNSHdETU9u) 
        ENV_FILE: Y2F0IDw8RU9UID4+IC5lbnYKQVBJX1VSTD0ke0FQSV9VUkx9CkJBU0VfVVJMPSR7QkFTRV9VUkx9Ck9ORV9TSUdOQUxfS0VZPSR7T05FX1NJR05BTF9LRVl9ClNUUklQRV9LRVk9JHtTVFJJUEVfS0VZfQpJTUFHRV9VUkxfUEFUSD0ke0lNQUdFX1VSTF9QQVRIfQpJT1NfR09PR0xFX01BUF9BUElfS0VZPSR7SU9TX0dPT0dMRV9NQVBfQVBJX0tFWX0KQU5EUk9JRF9HT09HTEVfTUFQX0FQSV9LRVk9JHtBTkRST0lEX0dPT0dMRV9NQVBfQVBJX0tFWX0KRU9U
        JKS_KEY_PROPERTY: Y2F0IDw8RU9UID4+IGFuZHJvaWQva2V5LnByb3BlcnRpZXMKc3RvcmVQYXNzd29yZD0ke1NUT1JFX1BBU1NXT1JEfQprZXlQYXNzd29yZD0ke0tFWV9QQVNTV09SRH0Ka2V5QWxpYXM9a2V5CnN0b3JlRmlsZT0uLi9rZXkuamtzCkVPVA==
      flutter: stable
      xcode: latest
      cocoapods: default
    cache:
      cache_paths: []
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: release
          include: true
          source: true
    scripts:
      - flutter upgrade
      - export LC_CTYPE=C; export LANG=C;
      - find ios/Runner/AppDelegate.swift -type f -exec sed -i '' "s|IOS_GOOGLE_MAP_API_KEY|$IOS_GOOGLE_MAP_API_KEY|g" {} \;
      - echo $ENV_FILE | base64 --decode > env
      - sh env
      - echo $JKS_KEY_PROPERTY | base64 --decode > keys
      - sh keys
      - flutter packages pub get
      - flutter build appbundle --target-platform android-arm,android-arm64,android-x64
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "com.bazzar.userapp" --type IOS_APP_STORE --create
      - keychain add-certificates
      - flutter build ios --release --no-codesign
      - xcode-project use-profiles
      - xcode-project build-ipa --workspace "ios/Runner.xcworkspace" --scheme "Runner"
    artifacts:
      - build/**/outputs/**/*.apk
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/mapping.txt
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - sezgin@gnsofttr.com
      app_store_connect:
        #app_id: "1570203866"
        apple_id: sezqinsezer@icloud.com
        password: Encrypted(Z0FBQUFBQmd0Yi1NN2hvemgtZGdHbkhMRU5BS1hOUHExcGJlYllZMjFMRlR1dHJCODc2elIwQ3U3VVVKX2xvZV8zb2g0dGwyc3g5Q2VEMml2R0h6WFg0dzhXZFNCZ2MxOUlza01oNlJ6aHdBaF9aTXNvd1FtWUk9)
      google_play:
        credentials: Encrypted(Z0FBQUFBQmd0Yi1NVFhjbkk1TWtPYmx1QVdYTEV1NVk1c003WDI5Mzd2Y2Q4OWRZTkJEMWRaYlFkVWUxZzl5UlBicDhWcTFLRk9MYXFSSDBIdUl3SEE1X2RwbU9FS2s0VGNVNk5MWWtFOFlXQU5OYkdVS25pbnZmUldXRjdXS1FmTENvQkxnUWlTVkxwWFRob2pkbnRJU1hkQmZSZlkwUzNFUC1BSEttUEMydGFUdnFuRnR4WjNfdTlFemtyMHlLY21UeGVPRkNQamU3MVpHQ3FuVGo5WEI4NFNKSDlMX05PMTRqRFZXaWQ5aTNHVUgwTnNaSFpFUEVJQ3NyYl9VNzA0VktmRXktLU0wVGVtbnJWU0thWFpjUEE4bjQxZ2RBZ2d3OXJqTDFGZTh0c09Zdm5YU25UdG40VEo5S3ZvVkQ2MVFjSTJJYmVlZGIxc21MbW1TaVF0ck1iUExkcUdqSzQ3eXlZMURMRHFJQTNlaUZQUGdaM21TMmNNYmlJWXQ5MFRSWmJNaVZtM3lscVl3UnhRV1REYVhHU0JLNC1ITmptampPNW52U2NWbm1zbkplU1J3WkZIam56WVl0NGdFZlpVQ3FSdUU3Z1YyNks5WDF0S0RnRmRZX3JmVFV1MnVzMnFNaEI3VG5sRTNnajZ6XzR0SGxDUHdxVDN0c3F1aU84V19QOXZGSmhJbUtqYk8yckxzMjlZMTlzcUZXM3hyN1huaDBIVlNiMHNZUC1QZWZ2ME1rVXF6UEUtZ1Rnc080UVR2bTVNbFJIRFBTYXpYN2RRXzVDeUhXVnhVZE9OellQdWoyNGdpWElQU2lMYWd4ZG1udWVZbUVVYTlKb3NNRUhacnM1TVprdWo1Z0ZkWHVzUENNWnN3Sk5Wdk42SHdpY2ZuWTBpUFFUVVNFWjQ3Y3NNN25PMUgtMTJ5b0FfcUtuZXRELXlyb0ZDczNFT2xyQWhrZGJXZ1RuYVJmTlVMbkZsZ2JQM2NjbU5GVHBINDJxZEpUSExXbmhKcmpUS2ZnWEFlN0J0SkZSUUJVM0Q1cEZlVXptajRzUHN5WWFoTkVQblBEYnF3cTNpeU1zZ1BBQlVpVDM1Q1pET1JWQkJJVDVRRXFxNTlpRDI3RTJyeU9TUC1fZ3p2WHZheFo5LVBjZW9iSzd4ejJnOVpwRmFTMXRiTHhleUxpRl9uUWM1c1dfRWhsQ0l5WVh5b2hMNUlDQnVxR1lHdEhpd0dWUlo0MERXT1c0ZzF4aExoQXMyVXZ1QVBZMzIwUEtqbUZpbDJrMDY4bDdDdXg2M3ppVk9aZ0l1YnVmUms4OVJnSmJJQjMzalRkYUpCUHVHUHlfX0tFa3dGTTJ3VndGUVhTS2xYbUt1VDExdTVMcmVIRjVDMVJTcUYwb3JzeEdHcS1wYjlXclBlUWRwb01GU21Jbkk2amx4ZkRLZDBYMkhyTDVTOGg1UVU0UmJQWDl6VjBQUmVRLXhfUlItZnJYWG5rQWN6R3JDZkNlaWNsZVAxbWRWa294ZjR2NkdRNFFaaEpCcTRuYnhnemJ5RXhuWGxaMDY3VjZiZFk2VHpVRjBOZWxBbV9QUXNiQjlzTG80TjFVWHlOWW5LTG5ZWjhrTGdPUzBEVFhjdUV0cXZSY2M0VlF6X3BsSllwcFVYX2szUEx3aVRlWUpqbklKWHRqa0NDempfcS14WUs5bjBkQmhnTDYtNkhzSUI0R0ROSW1hWTdJbGJRN3hMTWNyb0ZnQU54bGlNUDlKbkU4d2RNVzROc2ZNY2pGWm1mVHpyM3Fubmd3Um52Rjhjei1mN3pSQmtkZ3Bfa3ZVajRZYnh1SDhXTkdzRFlBbzBWZTkydjBrd1F4VThRV1pVS2RnaXlRMEYtbUZLRi0yLTlPYWlBb3pXWjR1TzhtRjg1VzNUb1NobjM1SGN0S1Vrb3pqakxJUllFbGlRZkpyZGJvR3lQejQ3UU5WZzJIRWNUNFlOOTZXWFktXzVsY1Z4UnY3MWVPTnpzM05sejBKSnY2bnpNeDFZOHdHQmdXdmJhbGVQT3otemdMOHlKLVNZSGUwamRGZDRFNGpkTVlmVTgycHpPaGtVNklPQU4yelZfeTFONFJtdFViZkx1Y3lOaHoxekdiUjQ4bFhOMm5HeFRkUm40VzBBM29rTmJxQW9YSHIyVjlEUFVzblpCbkR0cEpmYTRMbnhlQ0RVUEhsT0M1Q0JMRldYRWRLTjlJZnc2eDdaNm9BMnNRSnRSdXhHQWVneWRac1dMemdBcmdiVmJQV283Z3ZySEdEUzRtSzdyNFBGYjV3dFgzQUkwQndXaFM5R3gyTmVmTFJ6cXpCR3FlTkM1TzdYdzl4amhIdk1kQlRjMlZtcFRLVFJMZXRjNDhfVWNTNV9iZ1JSQXMxQ012WFc1RHNvYU9fbjRoUXRNcDNGQXBJdk53MWlBMGhJdV9UTDJGclROQ0xSbF9YYndDQzVvTzZPX2JWbzJOZ1NUQ3p6dDdSTzNRdGplUXdWVVIzWW1LU0pQSS02Vkowb1JfdUtqdTdCNUx6cF9neXVjTFBYUmlydWRpMWJuM2EwbE5oTVVEOThuU21XQm9jME9RMEdUdFpkbHJDWUZnaGtZZWx4ZXBjekQzMHptOUlnTU5yNVRRdW40c2h3dERNa0pobEF3cEJVOWRfX2ZUY2hCdTFZS2tvd2pqU2NtSmY0Q29Va1FFVTI4Yy1MQ1BSd2ZPa0k4N0M0MFNwYVhDb1lZd0x2ZGdpZ2xYbjFQU3RBYUhwc1dqdU5fSXRsSElhQTlWTFkzSEpUaThkQWtrZnBuczNpWU5KMmR0aTFZUnNXWFRSYnJpLUdlQmF2NHlYNC1VSVJ2UW9MWGpVQ25vMDhvQmhxSGxweXRsZlE2d2lTcUdmTDJJbmdUeGRBZlREZVBXMlJpOGpyR0Z5SlVJQk5NLVNEUmhtMkxxd2NxRFd2NW03R1N4UnZIQ29EYWpUemFURVlGMEE1NmFkMnBjOF9MUS1mQnVNbVR6VURsTXdrVS1SazNYSkNnajI5UGQtSkpTZWxPejlGTWNGd3VTYldtZTE3ZUJmWm1tbUNyWmNMeDNaRWNxYUtKTkJTUTRHa3BURndRdjRqRlZZN1VhbFprQXlaRnhHMmhnV3h1d0xYYldJRjllaDFFeko5NkYxeXNLZ0QweTdxRk1tVWJxOWxUVVJpWk11Rl83TVlSWmlVM0sxSGxIYnJETTYtcnB0UnFCVUxXRXlhazllNmRTMVVkSUVBdGt2TjNBY1B2Q2lhemI0VUFVSVF4MU1TODFWVm1oalI1ZUdjazFIbXdXLV9tcERTRzZkd2kwRU1nb3ZPYml6S2Q0ZTBjTjY4cE53VGllTjBDZFBzSzZlVkY0amlqZDQ2T3pod1R4SHRRQW1EcU03aVRNQUcteXJoWktaa0kwZ2FxZi1PR19CUzZIZFVydUJka2IzbzRUaWRPTWlrclBiZ2ROM0FZa1RocTFMX3pldXFiUmU4dW1uT2NIUGRhdUMzWmZ0R2JrWWRtRWw5ZDJ0QTNxSE1nbFpQTmp0dUdCWGEtWVJqWVktOFdwRHhaY0lRa2JxdmZucnE2Sko2UTltM1R2MnA4cDhwRDN2RDVVZmpQY1ktbXFGdFhMTzdsWTdmajk1UFNndUVDQV9OblFiSDJLV1dHbHZ3cXFIUTVzVXozWklvVGtvZ1FuTGszdDE2U1JOVkRzb2ptdk4tcjlPVUM0cG9jX1BhMlVpaHE0MWNyU0N5ZzFnWmRLY3VLbGhBRTRxcGxWeFBpbFRBWHJQcVVqSkNHSkJsdE5naUJwVGpMbXlHeXNQYms5NHJIcW91eTJLekE1TnAtZ24zeXV3TnpIU18tYzhENll3NGdFeUxPbTh3RENlYmlMejdvNHRhVWVvSk44V0dwcE1oU3o2cVM4ZHY0c3BMZGFHSk5KNzg0U0RKY2ltcmlUTEYxOEZkckhrS19MRjYyTlVsSzBBSFlsaER1VktxVVRGZmNyTGJJZVcxTGpkMjR2bjh0R2JrY1ZWSE1OdWNuX0lra3EtUDJ4YmI3aDdsTzVGTC1NZW5tZHVkMEtYdnh5Y19vREhkbElxZGpwTjR5T1FBQzBlcklaQmNuak80T0NuOXRsZFF0UHdTTWRQb2dlWEo2SXdtMktkdEVMU1RQb1FRX0lHeElxSjQ3RGtpZWp3YzhJd2ZWYXdUcmVOQlRlQXlDRkgzenVUcjJ5R20yd1l1eFhBZk5RU0JFbllDM0stSm52RXNva3Ezb092ZHZaUFpHSGVqejN4R0hMLTVoOTRJOG96ME12NTJrRjR2VXR3PT0=)
        track: production

  testing:
    name: Create APK for testing
    max_build_duration: 60
    environment:
      flutter: 2.2.3
      xcode: latest
      cocoapods: default
      vars:
        API_URL: https://api.bazzarapi.com
        BASE_URL: https://bazzarapi.com
        IMAGE_URL_PATH: https://ik.imagekit.io/ytqeidewn
        ONE_SIGNAL_KEY: Encrypted(Z0FBQUFBQmdyZWhVZ1hweTdjbDlvT0Jid1AxcTdFTkZETks5Y0dYdkpfamNyaExaR2hET3lJOHFyYmw1c2xDeEYxbVlkeHNUdE9IaHlabjdwbC0ycG5fVHktUzZ4X05pSEFGZ1c1aUdxQll2VWdqZHgyRHp1NXY0Z3U5RGFsT1l4em9JRkpWSjUtLXc=)
        #STRIPE_KEY: 
        ANDROID_GOOGLE_MAP_API_KEY: Encrypted(Z0FBQUFBQmdyZVk3V2VjMU9LY3BleDRnTlRXMXkzVVBPdXdzdHF1N1RTNENZNTlXS3RhT3c5NnVfQXRjQmNfVk8yUkFmRFBiVHctb09ic0ttYkRXQjl0enBQVnpyX1VkaFRCM3BWY0p6azYzNVZEMzRfVFAxdEtmY09ETldxSU04N0dPcmtOcFE3SnQ=)
        IOS_GOOGLE_MAP_API_KEY: Encrypted(Z0FBQUFBQmdyZVk3V2VjMU9LY3BleDRnTlRXMXkzVVBPdXdzdHF1N1RTNENZNTlXS3RhT3c5NnVfQXRjQmNfVk8yUkFmRFBiVHctb09ic0ttYkRXQjl0enBQVnpyX1VkaFRCM3BWY0p6azYzNVZEMzRfVFAxdEtmY09ETldxSU04N0dPcmtOcFE3SnQ=)
        STORE_PASSWORD: Encrypted(Z0FBQUFBQmdyZVpVX0hUUi1GOGx4Zy1zY1llZkxVRFY5c0R6cDRaYXVtRmxUWFRObHVsMjVDa1RfXzlfcE0wV1ZYZXJ0TGtkTTV5S29PT2MyLUZOTTcxd0xJazdfd0ZnN2c9PQ==)
        KEY_PASSWORD: Encrypted(Z0FBQUFBQmdyZVpVX0hUUi1GOGx4Zy1zY1llZkxVRFY5c0R6cDRaYXVtRmxUWFRObHVsMjVDa1RfXzlfcE0wV1ZYZXJ0TGtkTTV5S29PT2MyLUZOTTcxd0xJazdfd0ZnN2c9PQ==) 
        ENV_FILE: Y2F0IDw8RU9UID4+IC5lbnYKQVBJX1VSTD0ke0FQSV9VUkx9CkJBU0VfVVJMPSR7QkFTRV9VUkx9Ck9ORV9TSUdOQUxfS0VZPSR7T05FX1NJR05BTF9LRVl9ClNUUklQRV9LRVk9JHtTVFJJUEVfS0VZfQpJTUFHRV9VUkxfUEFUSD0ke0lNQUdFX1VSTF9QQVRIfQpJT1NfR09PR0xFX01BUF9BUElfS0VZPSR7SU9TX0dPT0dMRV9NQVBfQVBJX0tFWX0KQU5EUk9JRF9HT09HTEVfTUFQX0FQSV9LRVk9JHtBTkRST0lEX0dPT0dMRV9NQVBfQVBJX0tFWX0KRU9U
        JKS_KEY_PROPERTY: Y2F0IDw8RU9UID4+IGFuZHJvaWQva2V5LnByb3BlcnRpZXMKc3RvcmVQYXNzd29yZD0ke1NUT1JFX1BBU1NXT1JEfQprZXlQYXNzd29yZD0ke0tFWV9QQVNTV09SRH0Ka2V5QWxpYXM9a2V5CnN0b3JlRmlsZT0uLi9rZXkuamtzCkVPVA==
    cache:
      cache_paths: []
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: master
          include: true
          source: true
    scripts:
     # - flutter upgrade
      - export LC_CTYPE=C; export LANG=C;
      - echo $ENV_FILE | base64 --decode > env
      - sh env
      - echo $JKS_KEY_PROPERTY | base64 --decode > keys
      - sh keys
      - flutter packages pub get
      - flutter build apk --release
    artifacts:
      - build/**/outputs/apk/release/app-release.apk
      - build/**/outputs/**/mapping.txt
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - sezgin@gnsofttr.com
          - sarth@pietechsolution.com
